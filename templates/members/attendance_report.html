<!-- members/templates/members/attendance_report.html -->
{% extends 'members/base2.html' %} {% block content %}
<h1>Attendance Report</h1>

<!-- Filter Form -->
<form method="GET" action="{% url 'attendance_report' %}" class="form-inline mb-4">
    <div class="form-group mx-sm-3 mb-2">
        <label for="start_date" class="sr-only">Start Date:</label>
        <input type="date" id="start_date" name="start_date" value="{{ start_date }}" class="form-control">
    </div>
    <div class="form-group mx-sm-3 mb-2">
        <label for="end_date" class="sr-only">End Date:</label>
        <input type="date" id="end_date" name="end_date" value="{{ end_date }}" class="form-control">
    </div>
    <button type="submit" class="btn btn-primary mb-2 mr-2">Filter</button>
    <button type="submit" name="reset" value="true" class="btn btn-secondary mb-2">Reset to Today</button>
</form>


<!-- Attendance Table -->
<table class="table table-bordered">
    <thead class="thead-light">
        <tr>
            <th>Attendance Type</th>
            <th>Count</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Worship Service</td>
            <td>{{ worship_service_count }}</td>
        </tr>
        <tr>
            <td>Event</td>
            <td>{{ event_attendance_count }}</td>
        </tr>
        <tr>
            <td>Small Group</td>
            <td>{{ small_group_attendance_count }}</td>
        </tr>
        <tr>
            <td>Visitors</td>
            <td>{{ visitor_count }}</td>
        </tr>
    </tbody>
</table>

<!-- Export Button -->
<a href="{% url 'export_attendance_report' %}" class="btn btn-success mt-3">Export Detailed Report to CSV</a> {% endblock %}